# **API Curator App \- 機能要件定義書**

## **1\. プロジェクト概要**

ユーザーが入力したキーワードに基づいて、AI（Gemini API）が関連するWeb API情報をWeb上から調査・整理し、カタログ化して提供するWebアプリケーション。  
収集したデータはブラウザのローカルストレージ（IndexedDB）に保存され、ユーザー独自のAPIデータベースを構築できる。

## **2\. 技術スタック**

* **Frontend Framework**: React  
* **Styling**: Tailwind CSS  
* **Icons**: Lucide React  
* **AI Model**: Google Gemini API (ggemini-3-flash-preview)  
* **Database**: IndexedDB (Browser Native)  
* **Authentication**: Firebase Auth (Anonymous / Custom Token) ※現状は初期化のみでロジック上の必須依存はなし

## **3\. データモデル (API Schema)**

AIが生成し、IndexedDBに保存するデータの構造。

interface ApiItem {  
  id: string;              // UUID (Frontendで生成)  
  name: string;            // API名  
  provider: string;        // 開発元企業・団体  
  category: string;        // カテゴリ (例: Finance, Weather)  
  description: string;     // 短い概要 (一覧表示用)  
  longDescription: string; // 詳細な解説 (詳細ページ用)  
  useCases: string\[\];      // 主なユースケースのリスト  
  authType: string;        // 認証方式 (例: API Key, OAuth)  
  pricing: string;         // 価格モデル (例: Free, Paid)  
  url: string;             // 公式サイトURL  
  endpointExample: string; // 代表的なエンドポイントパス  
  responseExample: object; // レスポンスのJSON例  
  searchKeyword: string;   // このデータを生成した際の検索キーワード  
  createdAt: number;       // 作成日時 (Timestamp)  
  // 新規追加フィールド  
  lastCheckedAt?: number;  // 最終生存確認日時  
  status?: 'active' | 'deprecated' | 'eol'; // APIの状態  
}

## **4\. 機能一覧**

### **4.1. 検索とデータ生成 (AI Agent)**

* **入力インターフェース**:  
  * 中央配置の検索バー。  
  * 検索ボタン（ローディング中はスピナー表示）。  
* **AI処理ロジック**:  
  * ユーザー入力のキーワードを受け取り、Gemini APIへプロンプトを送信。  
  * プロンプトの役割: 「熟練したAPIリサーチャー」として振る舞い、実在するAPIを3〜5件特定する。  
  * 出力形式: 指定されたJSONスキーマに従った構造化データのみを返すこと。  
* **エラーハンドリング**:  
  * APIタイムアウト（60秒）。  
  * JSONパースエラー時の処理。  
  * ユーザーへのエラーメッセージ表示。

### **4.2. データ永続化 (IndexedDB)**

* **データベース名**: ApiCuratorDB  
* **ストア名**: apis  
* **CRUD操作**:  
  * **Create**: AIが生成したデータにIDとタイムスタンプを付与して保存。  
  * **Read**: 保存された全データを取得し、createdAt の降順でソートして表示。  
  * **Delete**: ユーザー操作により特定のAPI情報を削除。確認ダイアログを表示すること。

### **4.3. 拡張機能 (Advanced Features)**

#### **A. 「とりあえず試せる」Playground機能**

* **概要**: Swagger UIのように、ブラウザ上でAPIリクエストをテストできる簡易コンソール。  
* **機能要件**:  
  * HTTPメソッド（GET/POSTなど）とエンドポイントの指定。  
  * ヘッダー（API Keyなど）とボディパラメータの入力フォーム。  
  * 「実行」ボタン押下で fetch リクエストを送信し、レスポンス結果を表示。  
  * **注意点**: CORS（Cross-Origin Resource Sharing）制限があるAPIについては、ブラウザから直接叩けない可能性がある旨をUIで警告する、またはCORSプロキシの利用を検討する。

#### **B. AIによるラッパーコード生成**

* **概要**: 選択したAPIをすぐに利用開始するための接続コードをAIが自動生成する。  
* **機能要件**:  
  * **言語選択**: Python (Flask), PowerShell, Node.js, cURL など。  
  * **生成ボタン**: 「コードを生成」ボタンを設置。  
  * **AI処理**: 保存されているAPI情報（エンドポイント、認証方式）を元に、Gemini APIへ「実行可能なサンプルコード」の生成を依頼する。  
  * **表示**: 生成されたコードをシンタックスハイライト付きで表示し、クリップボードへのコピー機能を提供する。

#### **C. 変更検知アラート (Monitoring)**

* **概要**: カタログ化されたAPIの仕様変更やEOL（End of Life）情報を追跡する。  
* **機能要件**:  
  * **定期チェック**: アプリ起動時や手動更新ボタン押下時に、AI（Gemini \+ Google Search）を利用して、登録APIの最新ステータスを確認する。  
  * **アラート表示**:  
    * 「仕様変更あり」「非推奨（Deprecated）」「サービス終了（EOL）」などのステータス変化があった場合、ダッシュボードや詳細画面で警告アイコンを表示する。  
  * **通知内容**: 具体的に何が変わったのか（例：v1廃止、有料化など）の要約を表示する。

#### **D. データのインポート/エクスポート (Data Management)**

* **概要**: 収集・整理したAPIカタログデータを外部ファイルとして出力し、バックアップや他ユーザーとの共有を可能にする。  
* **エクスポート機能**:  
  * **JSON形式 (必須)**: データベース内の全フィールドを含む完全なバックアップファイル (api-curator-backup.json) を生成。  
  * **CSV形式**: スプレッドシート管理用に、主要フィールド（名前, カテゴリ, URL, 認証タイプ, 説明）を抽出した表形式データを出力。  
  * **Markdown形式**: 人間が読みやすいドキュメント形式で全APIのリストを出力。レポート作成用。  
* **インポート機能**:  
  * **JSONインポート**: エクスポートされたJSONファイルを読み込み、ローカルDBに復元する。  
  * **バリデーション**: ファイル読み込み時にJSONスキーマのチェックを行い、不正な形式のファイルは拒否してエラーメッセージを表示する。  
  * **マージ戦略**: インポート時に既存データと重複する（同じIDまたは同じAPI名を持つ）場合の処理方針を実装（例: 重複はスキップ、またはタイムスタンプが新しい方を優先）。

### **4.4. UI/UX コンポーネント**

#### **A. ダッシュボード (メイン画面)**

* **ヘッダー**:  
  * アプリタイトルとロゴ。  
  * "Local DB" バッジの表示。  
  * **設定/メニューボタン**: インポート・エクスポート機能へのアクセスポイント。  
* **検索セクション**:  
  * ヒーローセクションとしての大きな見出し。  
  * 検索フォーム。  
* **APIリスト (Grid View)**:  
  * 3カラムのグリッドレイアウト（レスポンシブ対応）。  
  * **APIカード**:  
    * カテゴリバッジ、ステータスインジケーター（Active/EOLなど）。  
    * API名、提供元。  
    * 説明文（3行で省略表示）。  
    * 認証タイプ、価格モデルのタグ。  
    * 削除ボタン（ゴミ箱アイコン）。  
  * **Empty State**: データがない場合のプレースホルダー表示。

#### **B. 詳細ビュー (Detail View)**

* **ナビゲーション**:  
  * 「一覧に戻る」ボタン。  
* **ヘッダーエリア**:  
  * API名、カテゴリ、提供元の表示。  
  * 公式サイトへの外部リンクボタン。  
  * **ステータスバッジ**: 変更検知の結果を表示。  
* タブ切り替えUI:  
  情報を整理して表示するため、以下のタブを設ける。  
  1. **Overview**: 概要、ユースケース、メタデータ。  
  2. **Playground**: パラメータ入力フォームと実行結果コンソール。  
  3. **Code Gen**: 言語選択プルダウンとコード生成ボタン、コード表示エリア。  
* **サイドバー情報**:  
  * 認証タイプ、価格、提供元のメタデータリスト。

## **5\. デザインガイドライン**

* **テーマ**: ダークモード（slate-950 背景ベース）。  
* **アクセントカラー**: Indigo (indigo-500, indigo-600)。  
* **ステータスカラー**:  
  * Active: Emerald (emerald-500)  
  * Deprecated: Amber (amber-500)  
  * EOL/Error: Rose (rose-500)  
* **タイポグラフィ**: Sans-serif (Tailwind default)。  
* **アニメーション**:  
  * 画面遷移時のフェードイン/スライドイン。  
  * ホバー時のインタラクション。
